(()=>{"use strict";var e={d:(t,a)=>{for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{logError:()=>d,logInfo:()=>n,logMessage:()=>r,logSuccess:()=>c,logWarning:()=>l});var a={};e.r(a),e.d(a,{dot:()=>m,getChanges:()=>T,getDiff:()=>p,getFormData:()=>M,getProp:()=>g,merge:()=>f,objIsEmpty:()=>E,strToBool:()=>u,strToInt:()=>h,undot:()=>v});var s={};e.r(s),e.d(s,{request:()=>w});var i={};e.r(i),e.d(i,{detect:()=>b,set:()=>I});class o{constructor(e,t={}){this.formEl=e,this.config=Object.assign({errorClass:"",errorTextClass:""},t),[o.#e,o.#t,o.#a,o.#s,o.#i,o.#o,o.#r,o.#n,o.#l,o.#d].forEach((e=>{this.formEl.querySelectorAll(`[data-avow-type-${e}]`).forEach((t=>{this.#c.hasOwnProperty(e)||(this.#c[e]=[]),this.#c[e].push(t)}))}))}static#e="required";static#t="email";static#a="number";static#s="integer";static#i="minlength";static#o="maxlength";static#r="min";static#n="max";static#l="pattern";static#d="equals";#c={};#u=!0;getElements(){return this.#c}isValid(){return this.#u}validate(){this.reset(),Object.entries(this.#c).forEach((([e,t])=>{e===o.#e?t.forEach((e=>{this.#h(e)})):e===o.#t?t.forEach((e=>{this.#g(e)})):e===o.#a?t.forEach((e=>{this.#E(e)})):e===o.#s?t.forEach((e=>{this.#m(e)})):e===o.#i?t.forEach((e=>{this.#v(e,e.dataset.avowTypeMinlength)})):e===o.#o?t.forEach((e=>{this.#f(e,e.dataset.avowTypeMaxlength)})):e===o.#r?t.forEach((e=>{this.#p(e,e.dataset.avowTypeMin)})):e===o.#n?t.forEach((e=>{this.#T(e,e.dataset.avowTypeMax)})):e===o.#l?t.forEach((e=>{this.#M(e,e.dataset.avowTypePattern)})):e===o.#d&&t.forEach((e=>{this.#P(e,e.dataset.avowTypeEquals)}))}))}reset(){this.#u=!0,document.querySelectorAll(".avow-has-error").forEach((e=>{this.#w(e)}))}#w(e){e.classList.remove("avow-has-error"),e.classList.remove(...this.config.errorClass.split(" "));let t=[];for(let a of e.parentNode.children)a.classList.contains("avow-error")&&t.push(a);t.forEach((e=>{e.remove()}))}#b(e,t){this.#u=!1,e.classList.add("avow-has-error"),e.classList.add(...this.config.errorClass.split(" "));let a=document.createElement("div");a.classList.add("avow-error"),a.classList.add(...this.config.errorTextClass.split(" ")),a.innerText=t,e.parentNode.appendChild(a)}#I(e,t){return void 0===t?{required:"This field is required",email:"Value must be a valid email address",number:"Value must be a number",integer:"Value must be an integer",minlength:"Value does not meet minimum length",maxlength:"Value exceeds maximum length",min:"Value does not meet minimum value",max:"Value exceeds maximum value",pattern:"Value does not meet required definition",equals:"Value does not equal"}[e]:t}#h(e){""===e.value&&this.#b(e,this.#I(o.#e,e.dataset.avowRequiredMsg))}#g(e){""!==e.value&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.value)||this.#b(e,this.#I(o.#t,e.dataset.avowEmailMsg)))}#E(e){("number"!=typeof e.value&&isNaN(e.value)||""===e.value)&&this.#b(e,this.#I(o.#a,e.dataset.avowNumberMsg))}#m(e){""!==e.value&&(/^-?\d+$/.test(e.value)||this.#b(e,this.#I(o.#s,e.dataset.avowIntegerMsg)))}#v(e,t){e.value.length<parseInt(t)&&this.#b(e,this.#I(o.#i,e.dataset.avowMinlengthMsg))}#f(e,t){e.value.length>parseInt(t)&&this.#b(e,this.#I(o.#o,e.dataset.avowMaxlengthMsg))}#p(e,t){""!==e.value&&(isNaN(parseFloat(e.value))||parseFloat(e.value)<parseFloat(t))&&this.#b(e,this.#I(o.#r,e.dataset.avowMinMsg))}#T(e,t){""!==e.value&&(isNaN(parseFloat(e.value))||parseFloat(e.value)>parseFloat(t))&&this.#b(e,this.#I(o.#n,e.dataset.avowMaxMsg))}#M(e,t){if(""===e.value)return;const a=t.match(new RegExp("^/(.*?)/([gimy]*)$"));a&&new RegExp(a[1],a[2]).test(e.value)||this.#b(e,this.#I(o.#l,e.dataset.avowPatternMsg))}#P(e,t){const a=document.getElementById(t);a&&e.value===a.value||this.#b(e,this.#I(o.#d,e.dataset.avowEqualsMsg))}}function r(e){console.log("%cMESSAGE","font-weight:bold;border-radius:3px;padding: 0 2px 0 2px;background-color:grey;color:black;",e)}function n(e){console.log("%cINFO","font-weight:bold;border-radius:3px;padding: 0 2px 0 2px;background-color:blue;color:white;",e)}function l(e){console.log("%cWARNING","font-weight:bold;border-radius:3px;padding: 0 2px 0 2px;background-color:orange;color:black;",e)}function d(e){console.log("%cERROR","font-weight:bold;border-radius:3px;padding: 0 2px 0 2px;background-color:red;color:white;",e)}function c(e){console.log("%cSUCCESS","font-weight:bold;border-radius:3px;padding: 0 2px 0 2px;background-color:green;color:white;",e)}function u(e){return"true"===e}function h(e){return""===e?0:parseInt(e)}function g(e,t,a=null){return t in e?e[t]:a}function E(e){return"{}"===JSON.stringify(e)}function m(e,t=""){const a={};for(const s in e)if(e.hasOwnProperty(s)){const i=t?`${t}.${s}`:s;"object"!=typeof e[s]||null===e[s]||Array.isArray(e[s])?a[i]=e[s]:Object.assign(a,m(e[s],i))}return a}function v(e){const t={};for(const a in e){const s=e[a];let i=t;const o=a.split(".");for(let e=0;e<o.length-1;e++){const t=o[e];i[t]||(i[t]={}),i=i[t]}i[o[o.length-1]]=s}return t}function f(e,t){return v({...m(e),...m(t)})}function p(e,t){let a={};for(let s in t)t.hasOwnProperty(s)&&(e.hasOwnProperty(s)?t[s]!==e[s]&&(a[s]={status:"modified",oldValue:e[s],newValue:t[s]}):a[s]={status:"added",value:t[s]});for(let s in e)e.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(a[s]={status:"removed",value:e[s]});return a}function T(e,t){e=m(e),t=m(t);let a={};for(let s in t)t.hasOwnProperty(s)&&(e.hasOwnProperty(s)?t[s]!==e[s]&&(a[s]=t[s]):a[s]=t[s]);return v(a)}function M(e){const t=new FormData(e),a={};return t.forEach(((e,s)=>{if(s.endsWith("[]")){const e=s.slice(0,-2);a[e]=t.getAll(s)}else a[s]=e})),a}class P{constructor(e,t,a={}){this.formEl=e,this.submitEl=t,this.existingData=a}#N={};getData(){return this.#N=v(M(this.formEl)),this.#N}getChangedData(){const e=m(T(this.existingData,this.#N)),t=m(this.existingData);for(let a in e)""!==e[a]||t.hasOwnProperty(a)&&null!==t[a]||delete e[a];return v(e)}hasChangedData(){return!E(this.getChangedData())}}async function w(e,t,a=null,s={}){try{const i=await fetch(e,{method:t,body:a,headers:s}),o=await i.json();return{status:i.status,body:o}}catch(e){d("Request error"),d(e)}}function b(){if("theme"in localStorage)try{I(JSON.parse(localStorage.theme).name)}catch(e){localStorage.removeItem("theme"),d("Unable to detect theme: Invalid localStorage format")}else window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light");document.querySelectorAll("[data-theme-toggle]").forEach((e=>{e.addEventListener("click",(()=>{I(e.getAttribute("data-theme-toggle"))}))}))}function I(e){"light"===e?(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark")):(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")),localStorage.theme=JSON.stringify({name:e})}exports.init=function(){b(),function(){const e=document.querySelectorAll("a[data-skin-current-class]"),t=window.location.origin+window.location.pathname;e.forEach((e=>{const a=e.href.split("#")[0];if(t===a.split("?")[0]){const t=e.getAttribute("data-skin-current-class").split(" ");e.classList.add(...t)}}))}(),window.Skin={Avow:o,Console:t,Form:P,Helpers:a,Http:s,Theme:i}}})();